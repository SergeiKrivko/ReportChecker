<div class="container page-sized">
  <app-header>
    <tui-breadcrumbs size="l" class="path">
      @let report = selectedReport$ | async;
      @if (report) {
        <ng-container>
          <a *tuiItem tuiLink routerLink="." iconStart="@tui.book">{{ report.name }}</a>
        </ng-container>
      }
    </tui-breadcrumbs>
  </app-header>
  <tui-scrollbar>
    <div class="body-container page-padding">
      <div class="header-container">
        <div class="progress-container">
          @if (isProgress$ | async) {
            <tui-loader/>
            <div>Поиск ошибок...</div>
          }
        </div>
        <div class="right-container">
          @switch ((selectedReport$ | async)?.sourceProvider) {
            @case ('File') {
              <app-file-sp-version/>
            }
          }
          <a tuiIconButton iconStart="@tui.settings" appearance="flat" routerLink="./settings"></a>
        </div>
      </div>
      <div class="issues-container">
        @for (issue of issues$ | async; track issue.id) {
          <a tuiCardLarge tuiSurface="floating" [routerLink]="'./issues/' + issue.id" class="issue-card">
            <app-issue-header [issue]="issue"/>
          </a>
        }
      </div>

      <div class="issues-container">
        @for (issue of closedIssues$ | async; track issue.id) {
          <a tuiCardLarge tuiSurface="floating" [routerLink]="'./issues/' + issue.id" class="issue-card">
            <app-issue-header [issue]="issue"/>
          </a>
        }
      </div>
    </div>
  </tui-scrollbar>
</div>
