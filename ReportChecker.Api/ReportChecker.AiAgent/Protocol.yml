name: AiAgent

endpoints:
  FindIssues:
    input: Chapter[]
    output: IssueCreate[]
    mode: json

  WriteComment:
    input: WriteCommentRequest
    output: CommentResponse
    mode: json
  
  CheckIssues:
    input: Chapter[]
    output: CommentCreate[]
    mode: json
  
  ApplyInstruction:
    input: InstructionRequest
    output: CommentCreate[]
    mode: json

schemas:
  IssueRead:
    - name: id
      type: uuid

    - name: title
      type: string

    - name: status
      type: string

    - name: priority
      type: int
      description: От 1 до 10, где 1 - наиболее критичные ошибки, 10 - незначительные предложения.

    - name: comments
      type: CommentRead[]

  CommentRead:
    - name: id
      type: uuid

    - name: content
      type: string?

    - name: status
      type: string?

    - name: role
      type: string

  IssueCreate:
    - name: chapter
      type: string

    - name: title
      type: string
      description: Короткое описание ошибки

    - name: priority
      type: int
      description: От 1 до 10, где 1 - наиболее критичные ошибки, 10 - незначительные предложения.

    - name: comment
      type: string
      description: Расширенное описание ошибки

  CommentCreate:
    - name: issueId
      type: uuid

    - name: content
      type: string?

    - name: status
      type: string?
  
  Chapter:
    - name: name
      type: string

    - name: text
      type: string

    - name: issues
      type: IssueRead[]?
  
  WriteCommentRequest:
    - name: text
      type: string

    - name: issue
      type: IssueRead

  InstructionCreate:
    - name: instructionText
      type: string

    - name: apply
      type: bool

    - name: search
      type: bool

    - name: save
      type: bool

  CommentResponse:
    - name: comment
      type: CommentCreate

    - name: instruction
      type: InstructionCreate?
  
  InstructionRequest:
    - name: instruction
      type: string
    
    - name: chapters
      type: Chapter[]
